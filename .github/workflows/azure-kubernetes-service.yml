name: Docker Image CI

on:
  push:
    branches: [ master ]
  
jobs:

  build:
  
      runs-on: ubuntu-latest
      
      steps:
        - uses: actions/checkout@v2
          name: Check out code
        
        - uses: mr-smithers-excellent/docker-build-push@v3
          name: Build & push Docker image
          with:
            image: sanderwieringa/postservice
            tag: latest
            registry: docker.io
            dockerfile: PostService/Dockerfile
            directory: PostService 
            username: ${{ secrets.DOCKER_USERNAME}}
            password: ${{ secrets.DOCKER_PASSWORD}}
